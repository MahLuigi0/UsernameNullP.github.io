<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DC.B to SMPS Converter</title>
</head>
<body>
    <h2>DC.B to SMPS Converter</h2>
    <textarea id="input" rows="4" cols="50">
dc.b    dSnareS3, $18, dKickS3, dKickS3, dSnareS3, $06, dSnareS3, dSnareS3, dSnareS3
    </textarea>
    <br>
    <button onclick="convert()">Convert</button>
    <h3>Output</h3>
    <pre id="output"></pre>

    <script>
def convert_input(input_str):
    input_parts = [part.strip() for part in input_str.split(',')]
    output = []
    current_voice = ''
    current_line = ''

    for part in input_parts:
        if part.startswith('dSnareS3'):
            if current_voice != 'sSnareS3':
                if current_line:
                    output.append(current_line.strip())
                output.append('smpsSetvoice    sSnareS3')
                current_voice = 'sSnareS3'
                current_line = 'dc.b    nSnareS3'
            else:
                current_line += ', nSnareS3'
        elif part.startswith('dKickS3'):
            if current_voice != 'sKickS3':
                if current_line:
                    output.append(current_line.strip())
                output.append('smpsSetvoice    sKickS3')
                current_voice = 'sKickS3'
                current_line = 'dc.b    nKickS3'
            else:
                current_line += ', nKickS3'
        elif part.startswith('$'):
            current_line += ', ' + part
        else:
            current_line += ', ' + part

    if current_line:
        output.append(current_line.strip())

    return '\n'.join(output)

# Test the function
input_str = "dc.b    dSnareS3, $18, dKickS3, dKickS3, dSnareS3, $06, dSnareS3, dSnareS3, dSnareS3"
converted_output = convert_input(input_str)
print(converted_output)
    </script>
</body>
</html>
